<!DOCTYPE HTML>
<html>
<head>
<title>Login</title>
<script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
<link rel="stylesheet" href="jquery.mobile-1.0.css" /> 
<script src="jquery.js"></script> 
<script src="jquery.mobile-1.0.js"></script>

<script type="text/javascript">
$( function() {

	alert(window.localStorage.getItem("userID"));

	$("#btnLogin").click(function() {	
		
		var email = $( "#email" ),
			password = $( "#password" );
		
		var userID = "";
	
		$.ajax({ url: "http://mobiletest.proofing.wired.co.nz/JsonService.asmx/UserLogin",
			data: { email: JSON.stringify(email.val()), password: JSON.stringify(password.val()) },
			dataType: "jsonp",
			success: function(json) {				
				if (json.d == "") {
					alert("Sorry, you have entered an incorrect username and password");
				}
				else {
					userID = json.d;
					
					window.localStorage.setItem("userID", userID);
					window.localStorage.setItem("email", email.val());
					window.localStorage.setItem("password", password());					
				}
			},
			error: function() {
				alert("Hit error fn!");
			}
		});
	});
	
	document.addEventListener("deviceready", onDeviceReady, false);			
	
});
// PhoneGap is loaded and it is now safe to make calls PhoneGap methods
function onDeviceReady() {
	navigator.network.isReachable('phonegap.com', reachableCallback);
}
</script>  
</head>
<body>
	<div data-role="page" id="Login"> 
		<div data-role="header"> 
			<h1>Login</h1> 
		</div> 
		<div data-role="content">
			<div data-role="fieldcontain" class="ui-hide-label">
	         <label for="email">Email:</label>
	         <input type="text" name="email" id="email" value="" placeholder="Email"/>
			</div>
			<div data-role="fieldcontain" class="ui-hide-label">
	         <label for="password">Password:</label>
	         <input type="password" name="password" id="password" value="" placeholder="Password" />
			</div>			
			<button type="submit" id="btnLogin" data-theme="b" data-inline="true">Login</button>
			<a href="signup.html" rel="external" data-role="button" data-theme="c" data-inline="true">Signup</a>
			<a href="forgotpassword.html" rel="external" data-role="button" data-theme="a">Forgot password</a>
		</div> 
	</div> 	
	<div data-role="page" id="forgotpassword"> 
		<div data-role="header"> 
			<h1>Forgot your password</h1> 
		</div> 
		<div data-role="content"> 
	         <label for="fpEmail">Please enter your email address:</label>
	         <input type="text" name="fpEmail" id="fpEmail" value="" placeholder="Email address"/>
			 <button type="submit" id="btnForgotPassword" data-theme="b" data-inline="true">Send password</button>
			 <a href="#Login" data-role="button" data-theme="c" data-inline="true">Cancel</a>
		</div>
	</div>
</body>
</html>